(function(i,c,o,p,r,e,s,l){"use strict";const R=function(t){const n=JSON.parse(JSON.stringify(t));for(const a in n.author)switch(a){case"email":case"phone":case"mfaEnabled":case"hasBouncedEmail":delete n.author[a]}return n},{ScrollView:y}=e.ReactNative;function B({message:t}){const n=e.React.useMemo(function(){return JSON.stringify(R(t),null,4)},[t.id]),a={marginBottom:8};return e.React.createElement(e.React.Fragment,null,e.React.createElement(y,{style:{flex:1,marginHorizontal:13,marginVertical:10}},e.React.createElement(s.Button,{style:a,text:"Copy Raw Content",color:"brand",size:"small",disabled:!t.content,onPress:function(){e.clipboard.setString(t.content),l.showToast("Copied content to clipboard",o.getAssetIDByName("toast_copy_link"))}}),e.React.createElement(s.Button,{text:"Copy Raw Data",style:a,color:"brand",size:"small",onPress:function(){e.clipboard.setString(n),l.showToast("Copied data to clipboard",o.getAssetIDByName("toast_copy_link"))}}),t.content&&e.React.createElement(s.Codeblock,{selectable:!0,style:a},t.content),e.React.createElement(s.Codeblock,{selectable:!0},n)))}const u=r.findByProps("openLazy","hideActionSheet"),d=r.findByProps("push","pushLazy","pop"),h=r.findByProps("getRenderCloseButton")?.getRenderCloseButton??r.findByProps("getHeaderCloseButton")?.getHeaderCloseButton,b=r.findByName("Navigator")??r.findByProps("Navigator")?.Navigator,{FormRow:w,FormIcon:E}=s.Forms,N=c.before("openLazy",u,function([t,n,a]){const f=a?.message;n!=="MessageLongPressActionSheet"||!f||t.then(function(v){const C=c.after("default",v,function(k,S){e.React.useEffect(function(){return function(){C()}},[]);const g=p.findInReactTree(S,function(_){return _?.[0]?.type?.name==="ButtonRow"});if(!g)return;const A=function(){return e.React.createElement(b,{initialRouteName:"RawPage",goBackOnBackPress:!0,screens:{RawPage:{title:"ViewRaw",headerLeft:h?.(function(){return d.pop()}),render:function(){return e.React.createElement(B,{message:f})}}}})};g.push(e.React.createElement(w,{label:"View Raw",leading:e.React.createElement(E,{style:{opacity:1},source:o.getAssetIDByName("ic_chat_bubble_16px")}),onPress:function(){u.hideActionSheet(),d.push(A)}}))})})}),P=function(){return N()};return i.onUnload=P,i})({},vendetta.patcher,vendetta.ui.assets,vendetta.utils,vendetta.metro,vendetta.metro.common,vendetta.ui.components,vendetta.ui.toasts);
